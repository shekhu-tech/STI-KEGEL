<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Pelvic Health Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Premium Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@700;800;900&family=Noto+Sans+Devanagari:wght@700;900&display=swap" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        :root {
            --gold-light: #FFD700;
            --gold-primary: #D4AF37;
            --gold-secondary: #B8860B;
            --gold-dark: #996515;
            --black-deep: #0A0A0A;
            --black-surface: #121212;
            --primary: #FFD700; 
            --primary-rgb: 255, 215, 0; 
            --bg-dark: #050401; 
            --card-glass: rgba(15, 12, 5, 0.95);
            --header-offset: calc(15px + env(safe-area-inset-top));
            --header-height: 64px;
            --footer-offset: calc(25px + env(safe-area-inset-bottom));
            --footer-height: 64px; 
            --text-light: #ffffff;
            --dark-green: #013220; 
        }

        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', 'Noto Sans Devanagari', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            padding-top: calc(var(--header-offset) + var(--header-height) + 20px);
            padding-bottom: calc(var(--footer-offset) + var(--footer-height) + 40px);
            margin: 0;
            font-weight: 900; 
            overflow-x: hidden;
        }

        /* --- BACKGROUND --- */
        #fixed-media-background {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            z-index: -10; background-size: cover; background-position: center;
            opacity: 0.7; background-image: url('bridal.png');
            filter: contrast(125%) brightness(50%) sepia(40%);
        }

        /* --- GOLDEN FLOATING HEADER --- */
        .iphone-header {
            position: fixed; top: var(--header-offset); left: 50%; transform: translateX(-50%);
            width: 92%; max-width: 600px; height: var(--header-height);
            background: rgba(5, 4, 1, 0.96); backdrop-filter: blur(30px);
            border: 2px solid rgba(255, 215, 0, 0.4); border-radius: 24px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px; z-index: 2000; box-shadow: 0 0 25px rgba(255, 215, 0, 0.2);
        }

        /* --- SIDEBAR --- */
        .mobile-panel {
            position: fixed; 
            top: calc(var(--header-offset) + var(--header-height) + 10px); 
            bottom: calc(var(--footer-offset) + var(--footer-height) + 10px);
            right: 15px; width: 85%; max-width: 340px;
            background: rgba(8, 7, 2, 0.98); backdrop-filter: blur(45px); z-index: 1500; 
            transform: translateX(120%); transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            border: 2.5px solid var(--primary); border-radius: 35px; overflow: hidden;
            box-shadow: -30px 0 80px rgba(0,0,0,1);
        }
        .mobile-panel.open { transform: translateX(0); }
        .sidebar-bg-image { position: absolute; inset: 0; background-image: url('bridal.png'); background-size: cover; background-position: center; opacity: 0.55; z-index: 0; filter: grayscale(40%) brightness(30%); }
        .mandala-bg { position: absolute; top: 50%; left: 50%; width: 500px; height: 500px; margin-top: -250px; margin-left: -250px; opacity: 0.1; pointer-events: none; animation: spin 100s linear infinite; z-index: 1; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .sidebar-inner { height: 100%; overflow-y: auto; padding: 40px 20px; position: relative; z-index: 10; }
        .sidebar-close-btn { position: absolute; top: 15px; right: 15px; width: 40px; height: 40px; border-radius: 50%; background: var(--primary); color: #000; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 100; border: 2px solid #000; box-shadow: 0 0 20px var(--primary); }
        
        .accordion-btn { width: 100%; padding: 18px 22px; margin-bottom: 10px; border-radius: 18px; background: rgba(0, 0, 0, 0.5); font-weight: 800; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 2px; color: #fff; display: flex; justify-content: space-between; align-items: center; border: 1px solid rgba(255, 215, 0, 0.2); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out; }
        .side-sub-link { display: block; padding: 14px 35px; font-size: 0.8rem; color: #eee; background: rgba(0,0,0,0.4); border-left: 2px solid rgba(255, 215, 0, 0.15); text-decoration: none; border-bottom: 1px solid rgba(255,215,0,0.05); }

        /* --- GOLDEN DOCK --- */
        .iphone-dock-wrapper { 
            position: fixed; bottom: var(--footer-offset); 
            left: 0; width: 100%; display: flex; justify-content: center; z-index: 2000; padding: 0 15px; 
        }
        .iphone-dock { width: 100%; max-width: 500px; height: var(--footer-height); background: rgba(5, 4, 1, 0.98); backdrop-filter: blur(35px); border-radius: 28px; border: 2px solid rgba(255, 215, 0, 0.2); display: flex; justify-content: space-around; align-items: center; box-shadow: 0 15px 40px rgba(0,0,0,0.9); }
        
        .nav-link { color: #8892a0; font-size: 0.55rem; font-weight: 800; text-transform: uppercase; display: flex; flex-direction: column; align-items: center; transition: 0.3s; padding: 6px; }
        .nav-link i { font-size: 1.0rem; margin-bottom: 2px; }
        .nav-link.active { color: #ffffff; text-shadow: 0 0 10px rgba(255,255,255,0.5); }
        
        .dock-fab { width: 60px; height: 60px; background: radial-gradient(circle at center, #fff 0%, var(--primary) 70%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #000; font-size: 1.5rem; transform: translateY(-20px); border: 4px solid #050401; box-shadow: 0 12px 25px rgba(0,0,0,0.8), 0 0 35px rgba(var(--primary-rgb), 0.6); }

        /* ================ ORIGINAL roll.html STYLES ================ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body { 
            font-family: 'Inter', -apple-system, sans-serif; 
            background: #000000;
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
        }

        /* Background Image Layers with 70% Visibility */
        .background-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -10;
            background: linear-gradient(145deg, #000000 70%, rgba(212, 175, 55, 0.05) 100%);
        }
        
        .quiz-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.7; /* 70% visible */
            z-index: -9;
        }
        
        .analysis-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.7; /* 70% visible */
            z-index: -9;
        }
        
        .exercise-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.7; /* 70% visible */
            z-index: -9;
        }
        
        .modal-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.7; /* 70% visible */
            z-index: -9;
        }

        /* Question Popup Background */
        .question-popup-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.9; /* 70% visible */
            z-index: -9;
        }

        /* iPhone 12 Mini Optimization */
        @media (max-width: 375px) {
            .container { padding: 12px !important; }
            h1 { font-size: 1.5rem !important; }
            h2 { font-size: 1.25rem !important; }
            .btn { padding: 12px 16px !important; font-size: 14px !important; }
            .card { padding: 14px !important; }
        }

        /* Main Container */
        .main-container {
            background: rgba(10, 10, 10, 0.85);
            border: 1px solid rgba(212, 175, 55, 0.25);
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.9),
                0 0 24px rgba(212, 175, 55, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        /* 3D Text Effects */
        .text-3d-gold {
            text-shadow: 
                0 1px 0 rgba(255, 255, 255, 0.1),
                0 2px 0 rgba(255, 255, 255, 0.05),
                0 3px 0 rgba(212, 175, 55, 0.1),
                0 4px 0 rgba(212, 175, 55, 0.1),
                0 5px 0 rgba(212, 175, 55, 0.08),
                0 6px 1px rgba(0, 0, 0, 0.1),
                0 0 5px rgba(0, 0, 0, 0.1),
                0 1px 3px rgba(0, 0, 0, 0.3),
                0 3px 5px rgba(0, 0, 0, 0.2),
                0 5px 10px rgba(0, 0, 0, 0.25);
            color: var(--gold-light);
        }
        
        .text-3d-white {
            text-shadow: 
                0 1px 0 rgba(255, 255, 255, 0.1),
                0 2px 0 rgba(255, 255, 255, 0.05),
                0 3px 0 rgba(255, 255, 255, 0.05),
                0 4px 0 rgba(255, 255, 255, 0.04),
                0 5px 0 rgba(255, 255, 255, 0.03),
                0 6px 1px rgba(0, 0, 0, 0.1),
                0 0 5px rgba(0, 0, 0, 0.1),
                0 1px 3px rgba(0, 0, 0, 0.3),
                0 3px 5px rgba(0, 0, 0, 0.2);
            color: #ffffff;
        }
        
        .text-3d-secondary {
            text-shadow: 
                0 1px 0 rgba(255, 255, 255, 0.05),
                0 2px 0 rgba(255, 255, 255, 0.04),
                0 3px 0 rgba(212, 175, 55, 0.08),
                0 0 5px rgba(0, 0, 0, 0.1),
                0 1px 3px rgba(0, 0, 0, 0.2);
            color: rgba(255, 255, 255, 0.9);
        }

        /* Gold Effects with 3D */
        .gold-shimmer {
            background: linear-gradient(135deg, var(--gold-light) 0%, var(--gold-primary) 25%, #FFFFFF 50%, var(--gold-primary) 75%, var(--gold-light) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% auto;
            animation: shine 3s linear infinite;
            text-shadow: 
                0 1px 0 rgba(255, 255, 255, 0.1),
                0 2px 0 rgba(255, 255, 255, 0.05),
                0 3px 0 rgba(212, 175, 55, 0.1);
        }

        @keyframes shine {
            to { background-position: 200% center; }
        }

        /* Buttons with 3D Effects */
        .gold-btn {
            background: linear-gradient(135deg, var(--gold-secondary) 0%, var(--gold-primary) 100%);
            color: #000;
            font-weight: 800;
            border: none;
            transition: all 0.3s ease;
            text-shadow: 0 1px 0 rgba(255, 255, 255, 0.3);
            box-shadow: 
                0 4px 0 var(--gold-dark),
                0 6px 10px rgba(212, 175, 55, 0.3),
                0 10px 20px rgba(0, 0, 0, 0.2);
            position: relative;
        }
        
        .gold-btn:hover, .gold-btn:active {
            transform: translateY(-2px);
            box-shadow: 
                0 6px 0 var(--gold-dark),
                0 8px 15px rgba(212, 175, 55, 0.4),
                0 12px 25px rgba(0, 0, 0, 0.25);
        }
        
        .gold-btn:active {
            transform: translateY(1px);
            box-shadow: 
                0 2px 0 var(--gold-dark),
                0 3px 5px rgba(212, 175, 55, 0.3);
        }
        
        .secondary-btn {
            background: rgba(20, 20, 20, 0.95);
            border: 1px solid rgba(212, 175, 55, 0.4);
            color: var(--gold-light);
            transition: all 0.3s ease;
            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
            box-shadow: 
                0 3px 0 rgba(0, 0, 0, 0.3),
                0 5px 10px rgba(0, 0, 0, 0.2);
        }
        
        .secondary-btn:hover, .secondary-btn:active {
            background: rgba(212, 175, 55, 0.15);
            border-color: var(--gold-primary);
            box-shadow: 
                0 4px 0 rgba(0, 0, 0, 0.3),
                0 7px 15px rgba(0, 0, 0, 0.25);
        }

        .option-btn {
            background: rgba(20, 20, 20, 0.95);
            border: 1px solid rgba(212, 175, 55, 0.2);
            transition: all 0.2s ease;
            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
            box-shadow: 
                0 2px 0 rgba(0, 0, 0, 0.2),
                0 3px 5px rgba(0, 0, 0, 0.1);
        }
        
        .option-btn:hover, .option-btn:active {
            border-color: var(--gold-primary);
            background: rgba(212, 175, 55, 0.12);
            transform: translateY(-1px);
            box-shadow: 
                0 3px 0 rgba(0, 0, 0, 0.2),
                0 5px 8px rgba(0, 0, 0, 0.15);
        }

        /* Exercise Cards with 3D */
        .exercise-card {
            background: rgba(20, 20, 20, 0.9);
            border: 1px solid rgba(212, 175, 55, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
            box-shadow: 
                0 3px 0 rgba(0, 0, 0, 0.2),
                0 5px 10px rgba(0, 0, 0, 0.15);
        }
        
        .exercise-card:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 5px 0 rgba(0, 0, 0, 0.2),
                0 8px 15px rgba(0, 0, 0, 0.2);
        }
        
        .exercise-card.current {
            border-color: var(--gold-primary);
            background: linear-gradient(135deg, rgba(20, 20, 20, 0.95), rgba(212, 175, 55, 0.18));
            animation: pulse-glow 2s infinite;
            box-shadow: 
                0 4px 0 rgba(212, 175, 55, 0.3),
                0 6px 15px rgba(212, 175, 55, 0.25),
                0 0 20px rgba(212, 175, 55, 0.1);
        }
        
        .exercise-card.locked {
            opacity: 0.4;
            filter: grayscale(1);
            pointer-events: none;
        }
        
        .exercise-card.completed {
            border-color: #10B981;
            background: rgba(16, 185, 129, 0.12);
            box-shadow: 
                0 3px 0 rgba(16, 185, 129, 0.3),
                0 5px 10px rgba(16, 185, 129, 0.15);
        }

        @keyframes pulse-glow {
            0%, 100% { 
                box-shadow: 
                    0 4px 0 rgba(212, 175, 55, 0.3),
                    0 6px 15px rgba(212, 175, 55, 0.25),
                    0 0 20px rgba(212, 175, 55, 0.1);
            }
            50% { 
                box-shadow: 
                    0 4px 0 rgba(212, 175, 55, 0.3),
                    0 6px 20px rgba(212, 175, 55, 0.35),
                    0 0 25px rgba(212, 175, 55, 0.15);
            }
        }

        /* Progress Bar with 3D */
        .progress-bar {
            background: linear-gradient(90deg, var(--gold-secondary), var(--gold-primary));
            background-size: 200% auto;
            animation: shine 2s linear infinite;
            height: 8px;
            border-radius: 10px;
            box-shadow: 
                0 2px 0 rgba(212, 175, 55, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        
        .progress-bar-container {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 
                inset 0 2px 4px rgba(0, 0, 0, 0.5),
                0 1px 0 rgba(255, 255, 255, 0.05);
        }

        /* Badges with 3D */
        .badge {
            font-size: 0.7rem;
            font-weight: 800;
            padding: 4px 10px;
            border-radius: 12px;
            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
        }
        
        .badge-gold {
            background: linear-gradient(135deg, var(--gold-secondary), var(--gold-primary));
            color: black;
            box-shadow: 
                0 3px 0 var(--gold-dark),
                0 5px 10px rgba(212, 175, 55, 0.2);
        }

        /* Video Container - Custom Player with 3D */
        .video-container {
            background: #000;
            border-radius: 16px;
            overflow: hidden;
            border: 2px solid var(--gold-primary);
            position: relative;
            box-shadow: 
                0 8px 0 rgba(0, 0, 0, 0.4),
                0 15px 30px rgba(0, 0, 0, 0.5),
                0 0 30px rgba(212, 175, 55, 0.2);
        }

        /* Category Tags with 3D */
        .category-tag {
            font-size: 0.65rem;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 8px;
            background: rgba(212, 175, 55, 0.2);
            color: var(--gold-light);
            border: 1px solid rgba(212, 175, 55, 0.4);
            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
            box-shadow: 
                0 2px 0 rgba(0, 0, 0, 0.3),
                0 3px 5px rgba(0, 0, 0, 0.2);
        }

        /* Solution Highlight with 3D */
        .solution-highlight {
            background: linear-gradient(90deg, rgba(212, 175, 55, 0.2), transparent);
            border-left: 3px solid var(--gold-primary);
            box-shadow: 
                0 3px 0 rgba(0, 0, 0, 0.2),
                0 5px 10px rgba(0, 0, 0, 0.15);
        }

        /* Safe Areas */
        .safe-area-top { padding-top: env(safe-area-inset-top); }
        .safe-area-bottom { padding-bottom: env(safe-area-inset-bottom); }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Exercise Status with 3D */
        .exercise-status {
            font-size: 0.7rem;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 6px;
            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
            box-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);
        }
        
        .status-current { 
            background: rgba(212, 175, 55, 0.25); 
            color: var(--gold-light); 
            box-shadow: 0 2px 0 rgba(212, 175, 55, 0.3);
        }
        .status-completed { 
            background: rgba(16, 185, 129, 0.25); 
            color: #10B981; 
            box-shadow: 0 2px 0 rgba(16, 185, 129, 0.3);
        }

        /* Number Indicators with 3D */
        .number-indicator {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 0.85rem;
            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
            box-shadow: 
                0 3px 0 rgba(0, 0, 0, 0.3),
                0 5px 8px rgba(0, 0, 0, 0.2);
        }
        
        .number-current {
            background: linear-gradient(135deg, var(--gold-secondary), var(--gold-primary));
            color: black;
            animation: pulse 2s infinite;
            box-shadow: 
                0 3px 0 var(--gold-dark),
                0 5px 10px rgba(212, 175, 55, 0.3);
        }
        
        .number-completed {
            background: #10B981;
            color: white;
            box-shadow: 
                0 3px 0 #0A8F6E,
                0 5px 10px rgba(16, 185, 129, 0.3);
        }
        
        .number-locked {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 2px 0 rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        @keyframes pulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 
                    0 3px 0 var(--gold-dark),
                    0 5px 10px rgba(212, 175, 55, 0.3);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 
                    0 4px 0 var(--gold-dark),
                    0 7px 15px rgba(212, 175, 55, 0.4);
            }
        }

        /* Question Text with Enhanced Visibility */
        .question-text {
            text-shadow: 
                0 1px 0 rgba(255, 255, 255, 0.1),
                0 2px 0 rgba(255, 255, 255, 0.05),
                0 0 10px rgba(212, 175, 55, 0.2),
                0 0 20px rgba(212, 175, 55, 0.1);
            color: #ffffff;
            font-weight: 700;
            line-height: 1.4;
            letter-spacing: -0.01em;
        }
        
        .hint-text {
            text-shadow: 
                0 1px 0 rgba(0, 0, 0, 0.5),
                0 0 5px rgba(212, 175, 55, 0.2);
            color: rgba(255, 255, 255, 0.8);
        }

        /* Section Labels */
        .section-label {
            text-shadow: 
                0 1px 0 rgba(255, 255, 255, 0.1),
                0 2px 0 rgba(212, 175, 55, 0.1),
                0 0 8px rgba(212, 175, 55, 0.2);
            color: var(--gold-light);
            letter-spacing: 0.08em;
        }

        /* Score Display with 3D */
        .score-display {
            text-shadow: 
                0 1px 0 rgba(255, 255, 255, 0.1),
                0 2px 0 rgba(255, 255, 255, 0.05),
                0 3px 0 rgba(212, 175, 55, 0.15),
                0 4px 0 rgba(212, 175, 55, 0.1),
                0 0 15px rgba(212, 175, 55, 0.3);
            font-weight: 900;
        }

        /* Responsive Backgrounds - Ensure visibility on mobile */
        @media (max-width: 768px) {
            .quiz-background,
            .analysis-background,
            .exercise-background,
            .modal-background,
            .question-popup-bg {
                background-attachment: scroll;
                opacity: 0.7 !important; /* Force 70% on mobile */
            }
            
            /* Make sure background covers properly on mobile */
            .quiz-background::before,
            .analysis-background::before,
            .exercise-background::before,
            .modal-background::before,
            .question-popup-bg::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.3); /* Dark overlay for better text visibility */
                z-index: -1;
            }
        }

        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--gold-secondary), var(--gold-primary));
            border-radius: 10px;
        }

        /* Header Logo Glow */
        .logo-glow {
            filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.3))
                    drop-shadow(0 0 20px rgba(212, 175, 55, 0.2))
                    drop-shadow(0 0 30px rgba(212, 175, 55, 0.1));
        }

        /* Glass Effect for Cards */
        .glass-effect {
            background: rgba(15, 15, 15, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Ensure text is readable on background */
        .text-on-bg {
            position: relative;
            z-index: 1;
        }

        /* Question Popup Container */
        .question-popup-container {
            background: rgba(10, 10, 10, 0.85);
            border: 1px solid rgba(212, 175, 55, 0.25);
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.9),
                0 0 24px rgba(212, 175, 55, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
        }

        * { font-style: normal !important; }
        h1, h2, h3, span, p, a, button { font-weight: 900 !important; }
    </style>
</head>
<body>
    
    <!-- FIXED BACKGROUND (from main.html) -->
    <div id="fixed-media-background"></div>

    <!-- FLOATING HEADER (from main.html) -->
    <header class="iphone-header">
        <div class="flex items-center gap-3">
            <img src="blessingsssl.png" alt="Icon" class="w-9 h-9 rounded-xl border-2 border-primary shadow-lg">
            <img src="blessingsss.png" alt="Blessingsss" class="h-[18px]">
        </div>
        <button id="menuBtn" class="w-11 h-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-primary text-xl shadow-lg">
            <i class="fas fa-bars-staggered"></i>
        </button>
    </header>

    <!-- SIDEBAR (from main.html) -->
    <div id="sidebar" class="mobile-panel">
        <div class="sidebar-bg-image"></div>
        <svg class="mandala-bg" viewBox="0 0 100 100" fill="none" stroke="currentColor">
            <circle cx="50" cy="50" r="45" stroke-width="0.2" stroke-dasharray="1 1" />
            <path d="M50 0 L53 47 L100 50 L53 53 L50 100 L47 53 L0 50 L47 47 Z" stroke-width="0.2" />
        </svg>

        <div class="sidebar-inner">
            <div class="sidebar-close-btn" id="closeSidebar"><i class="fas fa-times"></i></div>
            <div class="text-center mb-8 border-b border-primary/20 pb-6">
                <img src="blessingsssl.png" alt="Icon" class="w-10 h-10 mx-auto rounded-full border border-primary mb-3">
                <img src="blessingsss.png" alt="Blessingsss" class="h-[20px] mx-auto">
                <p class="text-[9px] text-gray-400 uppercase tracking-[4px] mt-3">Your Mehndi Partner</p>
            </div>

            <div class="space-y-4 relative z-10">
                <div>
                    <button class="accordion-btn" onclick="toggleAccordion('side-bridal')">
                        <span>BRIDAL STUDIO</span> <i class="fas fa-chevron-down text-[10px]" id="icon-side-bridal"></i>
                    </button>
                    <div id="side-bridal" class="accordion-content">
                        <a href="bridal_traditional.html" class="side-sub-link">Royal Traditional</a>
                        <a href="bridal_arabic.html" class="side-sub-link">Modern Arabic</a>
                        <a href="bridal_indowestern.html" class="side-sub-link">Fusion Luxe</a>
                    </div>
                </div>

                <div>
                    <button class="accordion-btn" onclick="toggleAccordion('side-festive')">
                        <span>FESTIVE ART</span> <i class="fas fa-chevron-down text-[10px]" id="icon-side-festive"></i>
                    </button>
                    <div id="side-festive" class="accordion-content">
                        <a href="festive_arabic.html" class="side-sub-link">Festive Arabic Art</a>
                        <a href="festive_indian.html" class="side-sub-link">Indian Festive Best</a>
                        <a href="festive_indoarabic.html" class="side-sub-link">Indo-Arabic Fusion</a>
                        <a href="festive_geometric.html" class="side-sub-link">Moroccan Trends</a>
                        <a href="festive_minimal_art.html" class="side-sub-link">Minimalist Elegance</a>
                    </div>
                </div>

                <a href="custom_mehndi.html" class="accordion-btn"><span>CUSTOM CONCEPT</span><i class="fas fa-arrow-right text-[10px]"></i></a>
                <a href="meet_me.html" class="accordion-btn"><span>MEET MASTER</span><i class="fas fa-arrow-right text-[10px]"></i></a>

                <div>
                    <button class="accordion-btn" onclick="toggleAccordion('side-gallery')">
                        <span>GALLERY</span> <i class="fas fa-chevron-down text-[10px]" id="icon-side-gallery"></i>
                    </button>
                    <div id="side-gallery" class="accordion-content">
                        <a href="bridal_traditional.html" class="side-sub-link">Royal Traditional</a>
                        <a href="bridal_arabic.html" class="side-sub-link">Modern Arabic</a>
                        <a href="bridal_indowestern.html" class="side-sub-link">Fusion Luxe</a>
                        <a href="festive_arabic.html" class="side-sub-link">Festive Arabic Art</a>
                        <a href="festive_indian.html" class="side-sub-link">Indian Festive Best</a>
                        <a href="festive_indioarabic.html" class="side-sub-link">Indo-Arabic Fusion</a>
                        <a href="festive_geometric.html" class="side-sub-link">Moroccan Trends</a>
                        <a href="festive_minimal_art.html" class="side-sub-link">Minimalist Elegance</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- BACKGROUND LAYERS for Kegel App -->
    <div class="background-layer"></div>
    <div class="quiz-background" id="quiz-bg"></div>
    <div class="analysis-background hidden" id="analysis-bg"></div>
    <div class="exercise-background hidden" id="exercise-bg"></div>

    <!-- MAIN CONTENT - ORIGINAL roll.html CONTENT AS IT IS -->
    <div class="w-full min-h-screen safe-area-top safe-area-bottom flex items-center justify-center px-3 text-on-bg">
        <div class="w-full max-w-md main-container rounded-xl p-4 fade-in">
            
            <!-- Header -->
            <header class="text-center mb-6">
                <div class="flex justify-center mb-4">
                    <!-- Logo removed as per original -->
                </div>
                <h1 class="text-2xl font-black text-3d-gold mb-2 tracking-tight">S.T.I-KEGAL</h1>
                <p class="text-xs text-gold-light/80 font-bold uppercase tracking-wider text-3d-secondary">PELVIC HEALTH PARTNER</p>
            </header>

            <!-- Main Content -->
            <main id="app-content" class="mb-4">
                <!-- Progress -->
                <div id="progress-section" class="mb-5">
                    <div class="flex justify-between items-center mb-2">
                        <span id="step-label" class="text-xs font-bold section-label uppercase tracking-wider">Medical Assessment</span>
                        <span id="question-counter" class="text-xs font-bold text-gold-light text-3d-secondary">1/50</span>
                    </div>
                    <div class="progress-bar-container">
                        <div id="progress-bar" class="progress-bar w-5"></div>
                    </div>
                    <p id="progress-text" class="text-xs text-gray-300 mt-1.5 text-center text-3d-secondary">Comprehensive health evaluation...</p>
                </div>

                <!-- Quiz Section -->
                <div id="quiz-section" class="fade-in">
                    <div class="mb-5">
                        <h2 id="question-text" class="text-lg font-bold question-text mb-3"></h2>
                        <p id="question-hint" class="text-xs hint-text hidden"></p>
                    </div>
                    <div id="options-container" class="space-y-2.5"></div>
                    <div id="custom-input-container" class="hidden mt-3 space-y-2">
                        <textarea id="custom-input" rows="2" class="w-full bg-black/50 border border-gold-primary/30 rounded-lg p-3 text-sm text-white focus:outline-none focus:border-gold-primary focus:ring-1 focus:ring-gold-primary/30 glass-effect" placeholder="Please provide details..."></textarea>
                        <div class="flex gap-2">
                            <button onclick="submitCustomAnswer()" class="flex-1 gold-btn py-3 rounded-lg text-sm font-bold">Submit</button>
                            <button onclick="showCurrentQuestion()" class="py-3 px-4 bg-black/50 border border-gold-primary/30 text-gold-primary rounded-lg text-sm font-bold">Back</button>
                        </div>
                    </div>
                </div>

                <!-- Analysis Section -->
                <div id="analysis-section" class="hidden">
                    <div class="text-center mb-5">
                        <h2 class="text-xl font-black text-3d-gold mb-2">Assessment Complete!</h2>
                        <p class="text-xs text-gold-light/80 font-bold mb-4 text-3d-secondary">Your Personalized Medical Report</p>
                    </div>
                    
                    <div class="grid grid-cols-3 gap-3 mb-4">
                        <div class="glass-effect p-4 rounded-lg border border-gold-primary/15 text-center">
                            <div class="text-xs uppercase text-gray-400 mb-2 text-3d-secondary">Primary Focus</div>
                            <div id="focus-score" class="text-lg font-black score-display">--</div>
                        </div>
                        <div class="glass-effect p-4 rounded-lg border border-gold-primary/15 text-center">
                            <div class="text-xs uppercase text-gray-400 mb-2 text-3d-secondary">Urgency Level</div>
                            <div id="urgency-score" class="text-lg font-black score-display">--</div>
                        </div>
                        <div class="glass-effect p-4 rounded-lg border border-gold-primary/15 text-center">
                            <div class="text-xs uppercase text-gray-400 mb-2 text-3d-secondary">Program Length</div>
                            <div id="program-score" class="text-lg font-black score-display">--</div>
                        </div>
                    </div>
                    
                    <div class="glass-effect p-4 rounded-lg border border-gold-primary/15 mb-5 solution-highlight">
                        <h3 class="text-sm font-bold text-white mb-2 flex items-center text-3d-white">
                            <i class="fas fa-stethoscope text-gold-primary mr-2"></i> Medical Solution Prescription
                        </h3>
                        <p id="analysis-text" class="text-sm text-gray-300 leading-relaxed text-3d-secondary">
                            Analyzing your 50-point assessment for precise solution...
                        </p>
                        <div id="solution-points" class="mt-3 space-y-2"></div>
                    </div>
                    
                    <button onclick="showExercisePlan()" class="w-full gold-btn py-3.5 rounded-lg text-sm font-bold">
                        <i class="fas fa-clipboard-check mr-2"></i> View Prescribed Protocol
                    </button>
                </div>

                <!-- Exercise Plan Section -->
                <div id="exercise-section" class="hidden">
                    <div class="flex justify-between items-center mb-4">
                        <div>
                            <h2 class="text-lg font-bold text-3d-white mb-1.5">Medical Protocol</h2>
                            <div class="flex items-center">
                                <span class="badge badge-gold mr-2">Day <span id="current-day">1</span>/30</span>
                                <span id="completion-stats" class="text-xs text-gray-400 text-3d-secondary">0/6 completed</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="flex items-center space-x-2">
                                <div class="w-2.5 h-2.5 rounded-full bg-gold-primary animate-pulse"></div>
                                <span class="text-xs text-gold-primary font-bold text-3d-secondary">Current</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-4 p-3.5 bg-gradient-to-r from-black/50 to-gold-primary/10 rounded-lg border border-gold-primary/15 glass-effect">
                        <h3 class="text-sm font-bold text-white mb-1.5 flex items-center text-3d-white">
                            <i class="fas fa-prescription-bottle-alt text-gold-primary mr-2"></i> Medical Protocol Rules
                        </h3>
                        <p class="text-xs text-gray-300 text-3d-secondary">Complete exercises in prescribed order. Watch each video fully before proceeding.</p>
                    </div>
                    
                    <div id="exercise-list" class="space-y-3 max-h-[340px] overflow-y-auto pr-1.5 pb-2 custom-scrollbar"></div>
                    
                    <button onclick="restartAssessment()" class="w-full mt-4 py-3 bg-black/50 border border-gold-primary/30 text-gold-primary rounded-lg text-sm font-bold glass-effect">
                        <i class="fas fa-redo mr-2"></i> New Assessment
                    </button>
                </div>
            </main>
        </div>
    </div>

    <!-- DOCK NAV (from main.html) -->
    <div class="iphone-dock-wrapper">
        <nav class="iphone-dock">
            <a href="javascript:void(0)" class="nav-link" onclick="handleNavClick(this, 'bridal')"><i class="fas fa-wand-magic-sparkles"></i><span>Studio</span></a>
            <a href="javascript:void(0)" class="nav-link" onclick="handleNavClick(this, 'festive')"><i class="fas fa-fire"></i><span>Festive</span></a>
            
            <a href="main.html" class="dock-fab"><i class="fas fa-house-chimney"></i></a>
            
            <a href="javascript:void(0)" class="nav-link" onclick="handleNavClick(this, 'gallery')"><i class="fas fa-images"></i><span>Gallery</span></a>
            <a href="javascript:void(0)" class="nav-link" onclick="handleNavClick(this)"><i class="fas fa-user-circle"></i><span>Profile</span></a>
        </nav>
    </div>

    <!-- Question Popup Modal -->
    <div id="question-popup-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-3">
        <!-- Question Popup Background -->
        <div class="question-popup-bg"></div>
        
        <div class="w-full max-w-md z-10">
            <div class="question-popup-container p-4">
                <div class="text-center mb-4">
                    <h2 class="text-xl font-black text-3d-gold mb-2">Medical Assessment</h2>
                    <p class="text-xs text-gold-light/80 font-bold mb-3 text-3d-secondary">Question <span id="popup-question-number">1</span> of 50</p>
                </div>
                
                <div class="mb-4">
                    <h3 id="popup-question-text" class="text-lg font-bold question-text mb-3"></h3>
                    <p id="popup-question-hint" class="text-xs hint-text hidden"></p>
                </div>
                
                <div id="popup-options-container" class="space-y-2.5 mb-4"></div>
                
                <div id="popup-custom-input-container" class="hidden mt-3 space-y-2">
                    <textarea id="popup-custom-input" rows="2" class="w-full bg-black/50 border border-gold-primary/30 rounded-lg p-3 text-sm text-white focus:outline-none focus:border-gold-primary focus:ring-1 focus:ring-gold-primary/30 glass-effect" placeholder="Please provide details..."></textarea>
                    <div class="flex gap-2">
                        <button onclick="submitPopupCustomAnswer()" class="flex-1 gold-btn py-3 rounded-lg text-sm font-bold">Submit</button>
                        <button onclick="closeQuestionPopup()" class="py-3 px-4 bg-black/50 border border-gold-primary/30 text-gold-primary rounded-lg text-sm font-bold">Cancel</button>
                    </div>
                </div>
                
                <div class="flex gap-2">
                    <button onclick="closeQuestionPopup()" class="flex-1 secondary-btn py-3 rounded-lg text-sm font-bold">
                        <i class="fas fa-times mr-1.5"></i> Close
                    </button>
                    <button onclick="nextQuestionFromPopup()" class="flex-1 gold-btn py-3 rounded-lg text-sm font-bold">
                        Next <i class="fas fa-arrow-right ml-1.5"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Modal with Next Button -->
    <div id="video-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-3">
        <!-- Modal Background -->
        <div class="modal-background"></div>
        
        <div class="w-full max-w-md z-10 text-on-bg">
            <div class="video-container">
                <div class="relative">
                    <button onclick="closeVideoModal()" class="absolute top-3 right-3 z-20 bg-black/90 p-2.5 rounded-full border border-gold-primary/20">
                        <i class="fas fa-times text-white text-sm"></i>
                    </button>
                    <div id="video-frame" class="w-full h-[60vh]"></div>
                </div>
            </div>
            
            <div class="mt-4 p-4 bg-black/95 rounded-lg border border-gold-primary/20 glass-effect">
                <h3 id="video-title" class="text-sm font-bold text-white mb-2 text-3d-white"></h3>
                <p id="video-description" class="text-xs text-gray-300 mb-3 text-3d-secondary"></p>
                <div class="flex items-center justify-between text-xs text-gray-400 mb-4">
                    <span class="flex items-center"><i class="fas fa-clock mr-1.5"></i> Duration: <span id="video-duration" class="font-bold ml-1">2:30</span></span>
                    <span class="flex items-center"><i class="fas fa-redo mr-1.5"></i> Reps: <span id="video-reps" class="font-bold ml-1">10x</span></span>
                    <span class="category-tag" id="video-category"></span>
                </div>
                
                <div id="solution-benefit" class="mb-4 p-3 rounded bg-black/60 border border-gold-primary/15">
                    <div class="flex items-center mb-1.5">
                        <i class="fas fa-lightbulb text-gold-primary mr-2"></i>
                        <span class="text-xs font-bold text-gold-light text-3d-secondary">Solution Benefit:</span>
                    </div>
                    <p id="solution-text" class="text-xs text-gray-300 text-3d-secondary"></p>
                </div>
                
                <div class="flex gap-3">
                    <button onclick="repeatCurrentVideo()" class="flex-1 secondary-btn py-3 rounded-lg text-sm font-bold">
                        <i class="fas fa-redo mr-1.5"></i> Repeat
                    </button>
                    <button onclick="nextVideo()" class="flex-1 gold-btn py-3 rounded-lg text-sm font-bold">
                        Next <i class="fas fa-arrow-right ml-1.5"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

<!-- ================ ORIGINAL roll.html SCRIPT AS IT IS ================ -->
<script>
    // ==================== STATE MANAGEMENT ====================
    let appState = {
        currentQuestion: 0,
        gender: null,
        age: null,
        primaryGoal: null,
        condition: null,
        experience: null,
        symptoms: [],
        scores: { leakage: 0, pain: 0, sexual: 0, strength: 0, endurance: 0, control: 0 },
        currentDay: 1,
        completedExercises: [],
        totalQuestions: 50,
        selectedCategory: null,
        selectedExercises: [],
        currentVideoIndex: 0,
        userProfile: {},
        dayProgress: {},
        dayExercises: {}
    };

    // ==================== COMPLETE 60+ EXERCISE LIBRARY ====================
    const exerciseLibrary = {
        // 1️⃣ BASIC / FOUNDATIONAL KEGELS (10 exercises)
        foundational: [
            {
                id: "F1",
                name: "Classic Hold Kegel",
                description: "Basic contraction hold for muscle identification",
                category: "foundational",
                subcategory: "slow",
                difficulty: "beginner",
                duration: "2:45",
                reps: "10 holds × 5s",
                videoCode: "9X5_U4D1uDk",
                benefit: "Identifies pelvic floor muscles. Essential starting point.",
                solution: "Teaches muscle awareness. Foundation for all exercises."
            },
            {
                id: "F2",
                name: "Timed Hold Progression",
                description: "Gradual increase from 3s to 10s holds",
                category: "foundational",
                subcategory: "slow",
                difficulty: "beginner",
                duration: "3:10",
                reps: "8 progressions",
                videoCode: "fD3XitN08nQ",
                benefit: "Builds endurance gradually. Prevents fatigue.",
                solution: "Progressive overload principle for safe strength building."
            },
            {
                id: "F3",
                name: "Quick Flick Kegels",
                description: "Rapid contractions for muscle response",
                category: "foundational",
                subcategory: "fast",
                difficulty: "beginner",
                duration: "2:20",
                reps: "20 quick flicks",
                videoCode: "ub3X7mC-7i4",
                benefit: "Improves reaction time. Good for urge control.",
                solution: "Trains fast-twitch muscle fibers for quick response."
            },
            {
                id: "F4",
                name: "Pulse Kegels",
                description: "Rhythmic pulsing for muscle tone",
                category: "foundational",
                subcategory: "fast",
                difficulty: "beginner",
                duration: "3:00",
                reps: "15 pulse cycles",
                videoCode: "bQ8p8pL2eH4",
                benefit: "Enhances muscle tone. Improves blood circulation.",
                solution: "Pumping action increases blood flow and oxygenation."
            },
            {
                id: "F5",
                name: "Micro Contractions",
                description: "Small, precise muscle engagements",
                category: "foundational",
                subcategory: "fast",
                difficulty: "beginner",
                duration: "2:50",
                reps: "25 micro reps",
                videoCode: "zQpGZfWqWw4",
                benefit: "Precision training. Isolates specific fibers.",
                solution: "Develops fine motor control in pelvic muscles."
            },
            {
                id: "F6",
                name: "Long-Hold Static",
                description: "Extended 15-second holds",
                category: "foundational",
                subcategory: "slow",
                difficulty: "intermediate",
                duration: "4:15",
                reps: "6 × 15s holds",
                videoCode: "Lx7p6Y2qJq4",
                benefit: "Builds endurance capacity. Increases stamina.",
                solution: "Extended holds build type-1 muscle fibers for endurance."
            },
            {
                id: "F7",
                name: "Progressive Hold (3-5-10)",
                description: "Systematic increase in hold times",
                category: "foundational",
                subcategory: "slow",
                difficulty: "beginner",
                duration: "3:30",
                reps: "3 sets progressive",
                videoCode: "mN3p7q4VvT4",
                benefit: "Structured progression. Measurable improvement.",
                solution: "Step-by-step progression prevents plateaus."
            },
            {
                id: "F8",
                name: "Rapid Fire Series",
                description: "Quick succession of contractions",
                category: "foundational",
                subcategory: "fast",
                difficulty: "intermediate",
                duration: "2:55",
                reps: "30 rapid reps",
                videoCode: "pQrR7qRqRq4",
                benefit: "Speed development. Muscle reactivity.",
                solution: "Improves neural drive to pelvic muscles."
            },
            {
                id: "F9",
                name: "Contraction Awareness",
                description: "Focus on muscle sensation",
                category: "foundational",
                subcategory: "slow",
                difficulty: "beginner",
                duration: "3:15",
                reps: "10 awareness reps",
                videoCode: "qWrR7qRqRq4",
                benefit: "Mind-muscle connection. Sensory awareness.",
                solution: "Critical for proper technique and progress."
            },
            {
                id: "F10",
                name: "Basic Rhythm Training",
                description: "Establish contraction rhythm",
                category: "foundational",
                subcategory: "fast",
                difficulty: "beginner",
                duration: "2:40",
                reps: "20 rhythm reps",
                videoCode: "rWrR7qRqRq4",
                benefit: "Consistent timing. Predictable patterns.",
                solution: "Establishes consistent contraction rhythm."
            }
        ],

        // 2️⃣ STRENGTH-FOCUSED KEGELS (8 exercises)
        strength: [
            {
                id: "S1",
                name: "Full Squeeze Max",
                description: "100% maximum contraction",
                category: "strength",
                subcategory: "max-contraction",
                difficulty: "intermediate",
                duration: "3:45",
                reps: "8 max squeezes",
                videoCode: "sWrR7qRqRq4",
                benefit: "Maximum strength development. Peak power.",
                solution: "Builds type-2 muscle fibers for strength."
            },
            {
                id: "S2",
                name: "Peak Hold Challenge",
                description: "Hold at maximum contraction",
                category: "strength",
                subcategory: "max-contraction",
                difficulty: "intermediate",
                duration: "4:20",
                reps: "5 peak holds",
                videoCode: "tWrR7qRqRq4",
                benefit: "Sustained strength. Endurance at peak.",
                solution: "Improves ability to maintain maximum contraction."
            },
            {
                id: "S3",
                name: "Clench & Release Power",
                description: "Explosive contraction and release",
                category: "strength",
                subcategory: "max-contraction",
                difficulty: "intermediate",
                duration: "3:30",
                reps: "10 explosive reps",
                videoCode: "uWrR7qRqRq4",
                benefit: "Power development. Fast strength.",
                solution: "Trains explosive power for sudden needs."
            },
            {
                id: "S4",
                name: "Kegel Ball Training",
                description: "Resistance-based strengthening",
                category: "strength",
                subcategory: "resistance",
                difficulty: "intermediate",
                duration: "4:45",
                reps: "3 sets of 10",
                videoCode: "vWrR7qRqRq4",
                benefit: "Progressive resistance. Measurable strength gains.",
                solution: "Adds external resistance for strength progression."
            },
            {
                id: "S5",
                name: "Vaginal Weight Training",
                description: "Weighted resistance for women",
                category: "strength",
                subcategory: "resistance",
                difficulty: "advanced",
                duration: "5:10",
                reps: "8 weighted reps",
                videoCode: "wWrR7qRqRq4",
                benefit: "Targeted strength. Measurable progress.",
                solution: "Specifically for vaginal muscle strengthening."
            },
            {
                id: "S6",
                name: "Progressive Resistance",
                description: "Increasing resistance over time",
                category: "strength",
                subcategory: "resistance",
                difficulty: "intermediate",
                duration: "4:30",
                reps: "Progressive sets",
                videoCode: "xWrR7qRqRq4",
                benefit: "Continuous strength gains. Avoids plateaus.",
                solution: "Systematic overload principle application."
            },
            {
                id: "S7",
                name: "Strength Endurance Combo",
                description: "Combines strength and endurance",
                category: "strength",
                subcategory: "max-contraction",
                difficulty: "advanced",
                duration: "5:30",
                reps: "6 combo reps",
                videoCode: "yWrR7qRqRq4",
                benefit: "Balanced development. Functional strength.",
                solution: "Combines strength and endurance training."
            },
            {
                id: "S8",
                name: "Isometric Strength Hold",
                description: "Static hold at 80% maximum",
                category: "strength",
                subcategory: "max-contraction",
                difficulty: "intermediate",
                duration: "4:00",
                reps: "5 isometric holds",
                videoCode: "zWrR7qRqRq4",
                benefit: "Sustained strength. Muscle density.",
                solution: "Builds isometric strength capacity."
            }
        ],

        // 3️⃣ CONTROL & COORDINATION KEGELS (6 exercises)
        control: [
            {
                id: "C1",
                name: "Elevator Wave Control",
                description: "Gradual intensity levels",
                category: "control",
                subcategory: "wave",
                difficulty: "intermediate",
                duration: "4:10",
                reps: "6 full waves",
                videoCode: "aXrR7qRqRq4",
                benefit: "Precise intensity control. Fine motor skills.",
                solution: "Teaches graded muscle contraction control."
            },
            {
                id: "C2",
                name: "Front-to-Back Sequencing",
                description: "Sequential muscle activation",
                category: "control",
                subcategory: "wave",
                difficulty: "intermediate",
                duration: "4:30",
                reps: "8 sequences",
                videoCode: "bXrR7qRqRq4",
                benefit: "Muscle isolation. Selective control.",
                solution: "Trains separate control of different pelvic areas."
            },
            {
                id: "C3",
                name: "Rolling Pelvic Wave",
                description: "Circular muscle engagement",
                category: "control",
                subcategory: "wave",
                difficulty: "advanced",
                duration: "4:45",
                reps: "6 rolling waves",
                videoCode: "cXrR7qRqRq4",
                benefit: "Complete muscle control. 360° engagement.",
                solution: "Comprehensive pelvic muscle coordination."
            },
            {
                id: "C4",
                name: "Stop-Start Precision",
                description: "Rapid on-off control",
                category: "control",
                subcategory: "stop-start",
                difficulty: "intermediate",
                duration: "3:45",
                reps: "12 precision reps",
                videoCode: "dXrR7qRqRq4",
                benefit: "Immediate control. Quick response.",
                solution: "Trains rapid muscle activation/deactivation."
            },
            {
                id: "C5",
                name: "Interrupted Flow Training",
                description: "Urinary flow control practice",
                category: "control",
                subcategory: "stop-start",
                difficulty: "intermediate",
                duration: "4:15",
                reps: "8 interruptions",
                videoCode: "eXrR7qRqRq4",
                benefit: "Practical bladder control. Real-world application.",
                solution: "Direct training for urinary control."
            },
            {
                id: "C6",
                name: "Multi-Level Coordination",
                description: "Complex control patterns",
                category: "control",
                subcategory: "wave",
                difficulty: "advanced",
                duration: "5:00",
                reps: "5 patterns",
                videoCode: "fXrR7qRqRq4",
                benefit: "Advanced coordination. Master-level control.",
                solution: "Develops sophisticated muscle coordination."
            }
        ],

        // 4️⃣ FUNCTIONAL / DAILY-LIFE KEGELS (6 exercises)
        functional: [
            {
                id: "FU1",
                name: "Walking Integration",
                description: "Kegels while walking",
                category: "functional",
                subcategory: "activity-linked",
                difficulty: "beginner",
                duration: "3:30",
                reps: "During 5-min walk",
                videoCode: "gXrR7qRqRq4",
                benefit: "Real-world application. Daily life integration.",
                solution: "Trains pelvic control during movement."
            },
            {
                id: "FU2",
                name: "Sitting Posture Kegels",
                description: "Engage while sitting properly",
                category: "functional",
                subcategory: "activity-linked",
                difficulty: "beginner",
                duration: "3:15",
                reps: "10 sitting reps",
                videoCode: "hXrR7qRqRq4",
                benefit: "Posture correction. Desk job solution.",
                solution: "Combines pelvic health with posture correction."
            },
            {
                id: "FU3",
                name: "Standing Stability",
                description: "Pelvic engagement while standing",
                category: "functional",
                subcategory: "activity-linked",
                difficulty: "beginner",
                duration: "3:00",
                reps: "8 standing reps",
                videoCode: "iXrR7qRqRq4",
                benefit: "Standing stability. Core integration.",
                solution: "Improves stability during standing activities."
            },
            {
                id: "FU4",
                name: "Cough Guard Reflex",
                description: "Pre-activation before cough/sneeze",
                category: "functional",
                subcategory: "stress-response",
                difficulty: "beginner",
                duration: "2:45",
                reps: "10 reflex reps",
                videoCode: "jXrR7qRqRq4",
                benefit: "Leakage prevention. Stress incontinence solution.",
                solution: "Trains protective reflex for cough/sneeze."
            },
            {
                id: "FU5",
                name: "Laugh Guard Protection",
                description: "Control during laughter",
                category: "functional",
                subcategory: "stress-response",
                difficulty: "intermediate",
                duration: "3:20",
                reps: "8 laugh reps",
                videoCode: "kXrR7qRqRq4",
                benefit: "Social confidence. Laughter control.",
                solution: "Prevents leakage during laughter."
            },
            {
                id: "FU6",
                name: "Lift Support Training",
                description: "Engage during lifting",
                category: "functional",
                subcategory: "stress-response",
                difficulty: "intermediate",
                duration: "3:45",
                reps: "6 lift reps",
                videoCode: "lXrR7qRqRq4",
                benefit: "Heavy load protection. Core stability.",
                solution: "Protects pelvic floor during heavy lifting."
            }
        ],

        // 5️⃣ BREATHING-INTEGRATED KEGELS (5 exercises)
        breathing: [
            {
                id: "B1",
                name: "Diaphragmatic Synchronization",
                description: "Coordination with deep breathing",
                category: "breathing",
                subcategory: "breath-sync",
                difficulty: "intermediate",
                duration: "4:15",
                reps: "10 breath cycles",
                videoCode: "mXrR7qRqRq4",
                benefit: "Breath-muscle harmony. Stress reduction.",
                solution: "Integrates pelvic health with breathing patterns."
            },
            {
                id: "B2",
                name: "Inhale Relax/Exhale Contract",
                description: "Natural breathing rhythm",
                category: "breathing",
                subcategory: "breath-sync",
                difficulty: "beginner",
                duration: "3:30",
                reps: "12 natural cycles",
                videoCode: "nXrR7qRqRq4",
                benefit: "Automatic integration. Relaxation response.",
                solution: "Makes pelvic exercises natural and automatic."
            },
            {
                id: "B3",
                name: "Mula Bandha Mastery",
                description: "Yogic root lock technique",
                category: "breathing",
                subcategory: "pranayama",
                difficulty: "advanced",
                duration: "5:00",
                reps: "8 yogic holds",
                videoCode: "oXrR7qRqRq4",
                benefit: "Energy control. Deep mind-body connection.",
                solution: "Traditional yogic technique for pelvic health."
            },
            {
                id: "B4",
                name: "Root Lock Energy Flow",
                description: "Energy awareness with breath",
                category: "breathing",
                subcategory: "pranayama",
                difficulty: "advanced",
                duration: "4:45",
                reps: "6 energy flows",
                videoCode: "pXrR7qRqRq4",
                benefit: "Energetic awareness. Vitality enhancement.",
                solution: "Combines physical and energetic aspects."
            },
            {
                id: "B5",
                name: "4-7-8 Breathing Pattern",
                description: "Therapeutic breathing rhythm",
                category: "breathing",
                subcategory: "breath-sync",
                difficulty: "intermediate",
                duration: "4:30",
                reps: "5 breathing patterns",
                videoCode: "qXrR7qRqRq4",
                benefit: "Anxiety reduction. Deep relaxation.",
                solution: "Therapeutic breathing for pelvic relaxation."
            }
        ],

        // 6️⃣ SEXUAL PERFORMANCE KEGELS (6 exercises)
        sexual: [
            {
                id: "SP1",
                name: "Erectile Strength (Male)",
                description: "Specific for erectile quality",
                category: "sexual",
                subcategory: "male",
                difficulty: "intermediate",
                duration: "4:00",
                reps: "10 erectile reps",
                videoCode: "rXrR7qRqRq4",
                benefit: "Improved erection quality. Enhanced stiffness.",
                solution: "Specifically targets erectile muscle groups."
            },
            {
                id: "SP2",
                name: "Ejaculation Control (Male)",
                description: "Timing and control training",
                category: "sexual",
                subcategory: "male",
                difficulty: "advanced",
                duration: "4:30",
                reps: "8 control reps",
                videoCode: "sXrR7qRqRq4",
                benefit: "Extended duration. Better control.",
                solution: "Trains control over ejaculation reflex."
            },
            {
                id: "SP3",
                name: "Vaginal Tightening (Female)",
                description: "Tone and sensation enhancement",
                category: "sexual",
                subcategory: "female",
                difficulty: "intermediate",
                duration: "4:15",
                reps: "12 tightening reps",
                videoCode: "tXrR7qRqRq4",
                benefit: "Increased sensation. Enhanced tightness.",
                solution: "Specifically for vaginal muscle tone."
            },
            {
                id: "SP4",
                name: "Orgasm Intensity (Female)",
                description: "Enhances orgasmic experience",
                category: "sexual",
                subcategory: "female",
                difficulty: "advanced",
                duration: "4:45",
                reps: "6 intensity reps",
                videoCode: "uXrR7qRqRq4",
                benefit: "Stronger orgasms. Better control.",
                solution: "Trains muscles involved in orgasm."
            },
            {
                id: "SP5",
                name: "Prostate Health (Male)",
                description: "Prostate-specific circulation",
                category: "sexual",
                subcategory: "male",
                difficulty: "intermediate",
                duration: "3:45",
                reps: "10 prostate reps",
                videoCode: "vXrR7qRqRq4",
                benefit: "Prostate health. Improved circulation.",
                solution: "Promotes prostate health through exercise."
            },
            {
                id: "SP6",
                name: "Sensation Enhancement (Both)",
                description: "Increases sexual sensitivity",
                category: "sexual",
                subcategory: "both",
                difficulty: "intermediate",
                duration: "4:20",
                reps: "8 sensation reps",
                videoCode: "wXrR7qRqRq4",
                benefit: "Enhanced pleasure. Better sensitivity.",
                solution: "Improves nerve sensitivity in pelvic area."
            }
        ],

        // 7️⃣ REHAB & MEDICAL KEGELS (6 exercises)
        rehab: [
            {
                id: "R1",
                name: "Post-Delivery Gentle Start",
                description: "Safe postpartum beginning",
                category: "rehab",
                subcategory: "post-surgery",
                difficulty: "beginner",
                duration: "3:30",
                reps: "8 gentle reps",
                videoCode: "xXrR7qRqRq4",
                benefit: "Safe recovery. Gradual rebuilding.",
                solution: "Specifically designed for postpartum recovery."
            },
            {
                id: "R2",
                name: "Post-Prostate Surgery",
                description: "Post-surgical recovery protocol",
                category: "rehab",
                subcategory: "post-surgery",
                difficulty: "beginner",
                duration: "4:00",
                reps: "10 recovery reps",
                videoCode: "yXrR7qRqRq4",
                benefit: "Surgical recovery. Function restoration.",
                solution: "Tailored for post-prostate surgery recovery."
            },
            {
                id: "R3",
                name: "Urge Suppression Training",
                description: "Controls sudden urges",
                category: "rehab",
                subcategory: "incontinence",
                difficulty: "intermediate",
                duration: "4:15",
                reps: "10 suppression holds",
                videoCode: "zXrR7qRqRq4",
                benefit: "Reduces urgency. Better control.",
                solution: "Specifically for urge incontinence."
            },
            {
                id: "R4",
                name: "Stress Leakage Prevention",
                description: "Prevents leakage under stress",
                category: "rehab",
                subcategory: "incontinence",
                difficulty: "intermediate",
                duration: "3:45",
                reps: "8 stress reps",
                videoCode: "aYrR7qRqRq4",
                benefit: "Confidence in movement. No more leaks.",
                solution: "Targets stress incontinence specifically."
            },
            {
                id: "R5",
                name: "Bowel Control Training",
                description: "Improves anal sphincter control",
                category: "rehab",
                subcategory: "incontinence",
                difficulty: "intermediate",
                duration: "4:30",
                reps: "10 bowel reps",
                videoCode: "bYrR7qRqRq4",
                benefit: "Better bowel control. Reduced accidents.",
                solution: "Specifically for fecal incontinence."
            },
            {
                id: "R6",
                name: "Pelvic Injury Recovery",
                description: "General pelvic rehabilitation",
                category: "rehab",
                subcategory: "post-surgery",
                difficulty: "beginner",
                duration: "4:00",
                reps: "8 rehab reps",
                videoCode: "cYrR7qRqRq4",
                benefit: "Injury recovery. Function restoration.",
                solution: "General protocol for pelvic injury recovery."
            }
        ],

        // 8️⃣ ENDURANCE & TIME-BASED KEGELS (5 exercises)
        endurance: [
            {
                id: "E1",
                name: "30-Second Marathon Hold",
                description: "Extended duration challenge",
                category: "endurance",
                subcategory: "long-duration",
                difficulty: "intermediate",
                duration: "5:30",
                reps: "4 × 30s holds",
                videoCode: "dYrR7qRqRq4",
                benefit: "Extended endurance. Muscle stamina.",
                solution: "Builds capacity for sustained contraction."
            },
            {
                id: "E2",
                name: "1-Minute Ultimate Hold",
                description: "Maximum endurance challenge",
                category: "endurance",
                subcategory: "long-duration",
                difficulty: "advanced",
                duration: "6:45",
                reps: "3 × 60s holds",
                videoCode: "eYrR7qRqRq4",
                benefit: "Maximum endurance. Peak stamina.",
                solution: "Ultimate endurance building exercise."
            },
            {
                id: "E3",
                name: "High-Rep Endurance (50+)",
                description: "High repetition training",
                category: "endurance",
                subcategory: "repetition",
                difficulty: "advanced",
                duration: "7:00",
                reps: "50+ reps",
                videoCode: "fYrR7qRqRq4",
                benefit: "Repetition endurance. Fatigue resistance.",
                solution: "Builds resistance to muscle fatigue."
            },
            {
                id: "E4",
                name: "Ladder Progression (10-20-30)",
                description: "Systematic increase in reps",
                category: "endurance",
                subcategory: "repetition",
                difficulty: "intermediate",
                duration: "5:15",
                reps: "Ladder sets",
                videoCode: "gYrR7qRqRq4",
                benefit: "Structured progression. Measurable gains.",
                solution: "Systematic approach to endurance building."
            },
            {
                id: "E5",
                name: "Endurance-Power Combo",
                description: "Combines endurance and strength",
                category: "endurance",
                subcategory: "long-duration",
                difficulty: "advanced",
                duration: "6:30",
                reps: "5 combo reps",
                videoCode: "hYrR7qRqRq4",
                benefit: "Complete development. Balanced capacity.",
                solution: "Combines endurance and strength training."
            }
        ],

        // 9️⃣ MINDFULNESS & VISUALIZATION (5 exercises)
        mindfulness: [
            {
                id: "M1",
                name: "Flower Visualization",
                description: "Imagine opening/closing flower",
                category: "mindfulness",
                subcategory: "imagery",
                difficulty: "beginner",
                duration: "3:45",
                reps: "8 visualizations",
                videoCode: "iYrR7qRqRq4",
                benefit: "Mental imagery. Deep connection.",
                solution: "Uses visualization for better muscle connection."
            },
            {
                id: "M2",
                name: "Elevator Visualization",
                description: "Mental floor-by-floor control",
                category: "mindfulness",
                subcategory: "imagery",
                difficulty: "intermediate",
                duration: "4:15",
                reps: "6 elevator rides",
                videoCode: "jYrR7qRqRq4",
                benefit: "Mental control. Precision imagery.",
                solution: "Mental rehearsal for precise control."
            },
            {
                id: "M3",
                name: "Root Energy Awareness",
                description: "Energy flow visualization",
                category: "mindfulness",
                subcategory: "imagery",
                difficulty: "advanced",
                duration: "4:45",
                reps: "5 energy flows",
                videoCode: "kYrR7qRqRq4",
                benefit: "Energetic awareness. Vitality.",
                solution: "Combines physical and energetic awareness."
            },
            {
                id: "M4",
                name: "Sensory Focus Meditation",
                description: "Focus on muscle sensations",
                category: "mindfulness",
                subcategory: "meditative",
                difficulty: "beginner",
                duration: "4:00",
                reps: "5 min focus",
                videoCode: "lYrR7qRqRq4",
                benefit: "Sensory awareness. Mindful connection.",
                solution: "Develops sensory awareness of pelvic area."
            },
            {
                id: "M5",
                name: "Body Scan Integration",
                description: "Full body awareness",
                category: "mindfulness",
                subcategory: "meditative",
                difficulty: "intermediate",
                duration: "5:15",
                reps: "1 full scan",
                videoCode: "mYrR7qRqRq4",
                benefit: "Whole-body integration. Complete awareness.",
                solution: "Integrates pelvic awareness with whole body."
            }
        ],

        // 🔟 ADVANCED HYBRID KEGELS (5 exercises)
        hybrid: [
            {
                id: "H1",
                name: "Kegel + Plank Fusion",
                description: "Combines with core plank",
                category: "hybrid",
                subcategory: "core-integrated",
                difficulty: "advanced",
                duration: "5:00",
                reps: "3 × 30s fusions",
                videoCode: "nYrR7qRqRq4",
                benefit: "Core integration. Whole-body strength.",
                solution: "Integrates pelvic and core strength."
            },
            {
                id: "H2",
                name: "Kegel + Squat Combo",
                description: "Integrates with squat movement",
                category: "hybrid",
                subcategory: "core-integrated",
                difficulty: "intermediate",
                duration: "4:30",
                reps: "10 combo reps",
                videoCode: "oYrR7qRqRq4",
                benefit: "Functional strength. Real-world application.",
                solution: "Combines pelvic strength with leg movement."
            },
            {
                id: "H3",
                name: "Kegel + Bridge Integration",
                description: "Combines with glute bridge",
                category: "hybrid",
                subcategory: "core-integrated",
                difficulty: "intermediate",
                duration: "4:45",
                reps: "8 bridge reps",
                videoCode: "pYrR7qRqRq4",
                benefit: "Glute-pelvic coordination. Posterior chain.",
                solution: "Coordinates pelvic and glute muscles."
            },
            {
                id: "H4",
                name: "Jump Control Training",
                description: "Maintains engagement during jumps",
                category: "hybrid",
                subcategory: "dynamic-load",
                difficulty: "advanced",
                duration: "5:30",
                reps: "8 jump sequences",
                videoCode: "qYrR7qRqRq4",
                benefit: "Impact control. Athletic stability.",
                solution: "Trains pelvic control during impact."
            },
            {
                id: "H5",
                name: "Athletic Stability Protocol",
                description: "For sports performance",
                category: "hybrid",
                subcategory: "dynamic-load",
                difficulty: "advanced",
                duration: "6:00",
                reps: "6 athletic reps",
                videoCode: "rYrR7qRqRq4",
                benefit: "Sports performance. Athletic control.",
                solution: "Specifically for athletic performance."
            }
        ],

        // 1️⃣1️⃣ NEGATIVE / RELAXATION KEGELS (5 exercises)
        relaxation: [
            {
                id: "RL1",
                name: "Pelvic Drop Release",
                description: "Complete muscle relaxation",
                category: "relaxation",
                subcategory: "reverse",
                difficulty: "beginner",
                duration: "3:30",
                reps: "8 release cycles",
                videoCode: "sYrR7qRqRq4",
                benefit: "Muscle relaxation. Tension release.",
                solution: "Essential for overactive pelvic floor."
            },
            {
                id: "RL2",
                name: "Reverse Kegel Push",
                description: "Gentle outward pressure",
                category: "relaxation",
                subcategory: "reverse",
                difficulty: "intermediate",
                duration: "4:00",
                reps: "10 reverse pushes",
                videoCode: "tYrR7qRqRq4",
                benefit: "Balance training. Relaxation skill.",
                solution: "Trains relaxation response in pelvic muscles."
            },
            {
                id: "RL3",
                name: "Stretch-Based Release",
                description: "Combines with stretching",
                category: "relaxation",
                subcategory: "lengthening",
                difficulty: "beginner",
                duration: "4:30",
                reps: "6 stretch-holds",
                videoCode: "uYrR7qRqRq4",
                benefit: "Muscle lengthening. Flexibility.",
                solution: "Combines stretching with pelvic relaxation."
            },
            {
                id: "RL4",
                name: "Pelvic Floor Massage",
                description: "Self-massage technique",
                category: "relaxation",
                subcategory: "lengthening",
                difficulty: "intermediate",
                duration: "5:15",
                reps: "Massage routine",
                videoCode: "vYrR7qRqRq4",
                benefit: "Muscle release. Tension relief.",
                solution: "Self-massage for pelvic tension."
            },
            {
                id: "RL5",
                name: "Complete Let-Go Training",
                description: "Total relaxation protocol",
                category: "relaxation",
                subcategory: "reverse",
                difficulty: "beginner",
                duration: "4:45",
                reps: "5 let-go cycles",
                videoCode: "wYrR7qRqRq4",
                benefit: "Deep relaxation. Stress relief.",
                solution: "Complete protocol for pelvic relaxation."
            }
        ]
    };

    // ==================== COMPREHENSIVE 50 QUESTIONS ====================
    const questions = [
        // Section 1: Personal & Demographic (5 questions)
        {
            id: 1,
            text: "What is your biological gender?",
            options: ["Male", "Female"],
            category: "demographic"
        },
        {
            id: 2,
            text: "What is your current age?",
            options: ["Under 25", "25-34", "35-44", "45-54", "55-64", "65+"],
            category: "demographic"
        },
        {
            id: 3,
            text: "Have you been pregnant? (Females only)",
            options: ["Never", "1 pregnancy", "2 pregnancies", "3+ pregnancies", "Currently pregnant"],
            category: "demographic"
        },
        {
            id: 4,
            text: "Have you had any pelvic surgeries?",
            options: ["None", "C-section", "Hysterectomy", "Prostate surgery", "Other pelvic surgery"],
            category: "demographic"
        },
        {
            id: 5,
            text: "Any chronic health conditions?",
            options: ["None", "Diabetes", "Hypertension", "Back problems", "Multiple conditions"],
            category: "demographic"
        },

        // Section 2: Symptoms & Problems (10 questions)
        {
            id: 6,
            text: "Do you experience urine leakage?",
            options: ["Never", "Rarely (few times/year)", "Sometimes (monthly)", "Often (weekly)", "Daily"],
            category: "symptoms"
        },
        {
            id: 7,
            text: "When does leakage usually occur?",
            options: ["No leakage", "When coughing/sneezing", "During exercise", "With urgency", "All the time"],
            category: "symptoms"
        },
        {
            id: 8,
            text: "How many times do you urinate at night?",
            options: ["0 times", "1 time", "2 times", "3 times", "4+ times"],
            category: "symptoms"
        },
        {
            id: 9,
            text: "Do you have sudden strong urges to urinate?",
            options: ["Never", "Rarely", "Sometimes", "Often", "Constantly"],
            category: "symptoms"
        },
        {
            id: 10,
            text: "Difficulty starting urine flow?",
            options: ["Never", "Occasionally", "Sometimes", "Often", "Always"],
            category: "symptoms"
        },
        {
            id: 11,
            text: "Feeling of incomplete emptying?",
            options: ["Never", "Rarely", "Sometimes", "Often", "Always"],
            category: "symptoms"
        },
        {
            id: 12,
            text: "Any pelvic pain or discomfort?",
            options: ["None", "During/after sex", "When sitting", "Lower back pain", "Constant pain"],
            category: "symptoms"
        },
        {
            id: 13,
            text: "Pain during sexual intercourse?",
            options: ["Never", "Occasionally", "Sometimes", "Often", "Always painful"],
            category: "symptoms"
        },
        {
            id: 14,
            text: "Do you experience constipation?",
            options: ["Never", "Occasionally", "Sometimes", "Often", "Chronic"],
            category: "symptoms"
        },
        {
            id: 15,
            text: "Do you strain during bowel movements?",
            options: ["Never", "Occasionally", "Sometimes", "Often", "Always"],
            category: "symptoms"
        },

        // Section 3: Lifestyle & Habits (10 questions)
        {
            id: 16,
            text: "What is your occupation?",
            options: ["Sedentary (desk job)", "Standing job", "Light physical", "Heavy physical", "Athlete"],
            category: "lifestyle"
        },
        {
            id: 17,
            text: "Hours sitting per day?",
            options: ["< 4 hours", "4-8 hours", "8-10 hours", "10-12 hours", "> 12 hours"],
            category: "lifestyle"
        },
        {
            id: 18,
            text: "Regular exercise routine?",
            options: ["None", "1-2 times/week", "3-4 times/week", "5+ times/week", "Athlete training"],
            category: "lifestyle"
        },
        {
            id: 19,
            text: "Type of exercise you do?",
            options: ["None", "Walking", "Running", "Weight training", "High impact sports"],
            category: "lifestyle"
        },
        {
            id: 20,
            text: "Daily water intake?",
            options: ["< 1 liter", "1-2 liters", "2-3 liters", "3-4 liters", "> 4 liters"],
            category: "lifestyle"
        },
        {
            id: 21,
            text: "Caffeine consumption?",
            options: ["None", "1 cup/day", "2-3 cups/day", "4-5 cups/day", "> 5 cups/day"],
            category: "lifestyle"
        },
        {
            id: 22,
            text: "Alcohol consumption?",
            options: ["None", "Occasionally", "Weekly", "Several times/week", "Daily"],
            category: "lifestyle"
        },
        {
            id: 23,
            text: "Smoking or vaping?",
            options: ["Never", "Former smoker", "Occasionally", "Regular smoker", "Heavy smoker"],
            category: "lifestyle"
        },
        {
            id: 24,
            text: "Quality of sleep?",
            options: ["Excellent", "Good", "Fair", "Poor", "Very poor"],
            category: "lifestyle"
        },
        {
            id: 25,
            text: "Stress level in daily life?",
            options: ["Very low", "Low", "Moderate", "High", "Very high"],
            category: "lifestyle"
        },

        // Section 4: Sexual Health (8 questions)
        {
            id: 26,
            text: "Satisfaction with sexual function?",
            options: ["Very satisfied", "Satisfied", "Neutral", "Dissatisfied", "Very dissatisfied"],
            category: "sexual"
        },
        {
            id: 27,
            text: "Erection quality (Males)?",
            options: ["Excellent", "Good", "Fair", "Poor", "No erection"],
            category: "sexual"
        },
        {
            id: 28,
            text: "Vaginal dryness (Females)?",
            options: ["Never", "Occasionally", "Sometimes", "Often", "Always"],
            category: "sexual"
        },
        {
            id: 29,
            text: "Orgasm frequency?",
            options: ["Always", "Usually", "Sometimes", "Rarely", "Never"],
            category: "sexual"
        },
        {
            id: 30,
            text: "Orgasm intensity?",
            options: ["Very intense", "Intense", "Moderate", "Mild", "No orgasm"],
            category: "sexual"
        },
        {
            id: 31,
            text: "Sexual desire/libido?",
            options: ["Very high", "High", "Moderate", "Low", "Very low"],
            category: "sexual"
        },
        {
            id: 32,
            text: "Pain after intercourse?",
            options: ["Never", "Rarely", "Sometimes", "Often", "Always"],
            category: "sexual"
        },
        {
            id: 33,
            text: "Confidence in sexual performance?",
            options: ["Very confident", "Confident", "Neutral", "Insecure", "Very insecure"],
            category: "sexual"
        },

        // Section 5: Previous Experience & Goals (7 questions)
        {
            id: 34,
            text: "Previous pelvic floor exercise experience?",
            options: ["None", "Tried few times", "Occasional practice", "Regular practice", "Expert"],
            category: "experience"
        },
        {
            id: 35,
            text: "Awareness of pelvic floor muscles?",
            options: ["No idea", "Vague idea", "Some awareness", "Good awareness", "Excellent awareness"],
            category: "experience"
        },
        {
            id: 36,
            text: "Primary goal for this program?",
            options: ["Stop leakage", "Improve sexual function", "Reduce pain", "General health", "All of above"],
            category: "goals"
        },
        {
            id: 37,
            text: "Secondary goals?",
            options: ["Better bladder control", "Improved intimacy", "Pain relief", "Postpartum recovery", "Sports performance"],
            category: "goals"
        },
        {
            id: 38,
            text: "Time available daily for exercises?",
            options: ["5-10 minutes", "10-15 minutes", "15-20 minutes", "20-30 minutes", "30+ minutes"],
            category: "goals"
        },
        {
            id: 39,
            text: "Willingness to commit to 30 days?",
            options: ["100% committed", "Very willing", "Moderately willing", "Somewhat willing", "Not sure"],
            category: "goals"
        },
        {
            id: 40,
            text: "Motivation level?",
            options: ["Extremely motivated", "Very motivated", "Moderately motivated", "Slightly motivated", "Not motivated"],
            category: "goals"
        },

        // Section 6: Medical & Specific Concerns (10 questions)
        {
            id: 41,
            text: "History of urinary tract infections?",
            options: ["Never", "1-2 times", "3-5 times", "6-10 times", "Frequent"],
            category: "medical"
        },
        {
            id: 42,
            text: "History of kidney stones?",
            options: ["Never", "Once", "2-3 times", "4+ times", "Chronic"],
            category: "medical"
        },
        {
            id: 43,
            text: "Prostate issues (Males)?",
            options: ["None", "Mild enlargement", "Moderate enlargement", "Severe enlargement", "Cancer history"],
            category: "medical"
        },
        {
            id: 44,
            text: "Menstrual issues (Females)?",
            options: ["None", "Mild cramps", "Moderate pain", "Severe pain", "Endometriosis"],
            category: "medical"
        },
        {
            id: 45,
            text: "History of prolapse?",
            options: ["None", "Mild", "Moderate", "Severe", "Surgery for prolapse"],
            category: "medical"
        },
        {
            id: 46,
            text: "Medications affecting urination?",
            options: ["None", "Diuretics", "Blood pressure meds", "Antidepressants", "Multiple medications"],
            category: "medical"
        },
        {
            id: 47,
            text: "Allergies affecting pelvic area?",
            options: ["None", "Mild", "Moderate", "Severe", "Multiple allergies"],
            category: "medical"
        },
        {
            id: 48,
            text: "Recent weight changes?",
            options: ["Stable", "Gained 5-10 lbs", "Gained 10+ lbs", "Lost 5-10 lbs", "Lost 10+ lbs"],
            category: "medical"
        },
        {
            id: 49,
            text: "Family history of pelvic issues?",
            options: ["None", "Mother", "Sister", "Multiple relatives", "Strong family history"],
            category: "medical"
        },
        {
            id: 50,
            text: "Previous physical therapy?",
            options: ["Never", "Few sessions", "Completed program", "Multiple programs", "Currently in therapy"],
            category: "medical"
        }
    ];

    // ==================== UI FUNCTIONS ====================

    function initApp() {
        showQuestion();
        setupEventListeners();
        // Show quiz background by default
        document.getElementById('quiz-bg').classList.remove('hidden');
    }

    function showQuestion() {
        if (appState.currentQuestion >= appState.totalQuestions) {
            generatePersonalizedProgram();
            return;
        }
        
        const question = questions[appState.currentQuestion];
        document.getElementById('question-text').textContent = question.text;
        
        // Update progress
        const progressPercent = ((appState.currentQuestion + 1) / appState.totalQuestions) * 100;
        document.getElementById('progress-bar').style.width = `${progressPercent}%`;
        document.getElementById('question-counter').textContent = `${appState.currentQuestion + 1}/${appState.totalQuestions}`;
        
        // Update section label
        const sections = ["Demographics", "Symptoms", "Lifestyle", "Sexual Health", "Goals", "Medical History"];
        const sectionIndex = Math.floor(appState.currentQuestion / 10);
        document.getElementById('step-label').textContent = sections[sectionIndex] || "Assessment";
        document.getElementById('progress-text').textContent = `Section ${sectionIndex + 1} of 6 - ${sections[sectionIndex]}`;
        
        // Clear and show options
        const container = document.getElementById('options-container');
        container.innerHTML = '';
        
        question.options.forEach((option, index) => {
            const btn = document.createElement('button');
            btn.className = "w-full option-btn p-3.5 rounded-lg text-sm font-bold flex justify-between items-center mb-1.5";
            btn.innerHTML = `
                <span class="text-left">${option}</span>
                <div class="w-5 h-5 rounded-full border border-gold-primary/40 flex items-center justify-center">
                    <div class="w-2 h-2 rounded-full bg-gold-primary opacity-0"></div>
                </div>
            `;
            
            // Add animation delay for staggered appearance
            btn.style.animationDelay = `${index * 0.05}s`;
            btn.classList.add('fade-in');
            
            btn.onclick = () => handleAnswer(option, question);
            container.appendChild(btn);
        });
        
        // Show quiz section
        document.getElementById('quiz-section').classList.remove('hidden');
        document.getElementById('analysis-section').classList.add('hidden');
        document.getElementById('exercise-section').classList.add('hidden');
        
        // Update background
        updateBackground('quiz');
    }

    function handleAnswer(answer, question) {
        // Store in user profile
        appState.userProfile[`q${question.id}`] = answer;
        
        // Store gender and age
        if (question.id === 1) appState.gender = answer;
        if (question.id === 2) appState.age = answer;
        
        // Update scores based on answers
        updateScores(answer, question);
        
        // Add visual feedback
        const selectedOption = event.target.closest('.option-btn');
        if (selectedOption) {
            selectedOption.classList.add('bg-gold-primary/20');
            selectedOption.style.borderColor = 'var(--gold-primary)';
        }
        
        // Move to next question
        setTimeout(() => {
            appState.currentQuestion++;
            showQuestion();
        }, 300);
    }

    // Function to open question popup
    function openQuestionPopup() {
        const question = questions[appState.currentQuestion];
        if (!question) return;
        
        // Update popup content
        document.getElementById('popup-question-number').textContent = appState.currentQuestion + 1;
        document.getElementById('popup-question-text').textContent = question.text;
        
        // Clear and show options in popup
        const container = document.getElementById('popup-options-container');
        container.innerHTML = '';
        
        question.options.forEach((option, index) => {
            const btn = document.createElement('button');
            btn.className = "w-full option-btn p-3.5 rounded-lg text-sm font-bold flex justify-between items-center mb-1.5";
            btn.innerHTML = `
                <span class="text-left">${option}</span>
                <div class="w-5 h-5 rounded-full border border-gold-primary/40 flex items-center justify-center">
                    <div class="w-2 h-2 rounded-full bg-gold-primary opacity-0"></div>
                </div>
            `;
            
            // Add animation delay for staggered appearance
            btn.style.animationDelay = `${index * 0.05}s`;
            btn.classList.add('fade-in');
            
            btn.onclick = () => handlePopupAnswer(option, question);
            container.appendChild(btn);
        });
        
        // Show popup modal
        document.getElementById('question-popup-modal').classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    }

    function handlePopupAnswer(answer, question) {
        // Store in user profile
        appState.userProfile[`q${question.id}`] = answer;
        
        // Store gender and age
        if (question.id === 1) appState.gender = answer;
        if (question.id === 2) appState.age = answer;
        
        // Update scores based on answers
        updateScores(answer, question);
        
        // Add visual feedback
        const selectedOption = event.target.closest('.option-btn');
        if (selectedOption) {
            selectedOption.classList.add('bg-gold-primary/20');
            selectedOption.style.borderColor = 'var(--gold-primary)';
        }
        
        // Close popup and move to next question
        setTimeout(() => {
            closeQuestionPopup();
            appState.currentQuestion++;
            
            if (appState.currentQuestion >= appState.totalQuestions) {
                generatePersonalizedProgram();
            } else {
                showQuestion();
            }
        }, 300);
    }

    function closeQuestionPopup() {
        document.getElementById('question-popup-modal').classList.add('hidden');
        document.body.style.overflow = 'auto';
    }

    function nextQuestionFromPopup() {
        // Move to next question without selecting an answer
        closeQuestionPopup();
        appState.currentQuestion++;
        
        if (appState.currentQuestion >= appState.totalQuestions) {
            generatePersonalizedProgram();
        } else {
            showQuestion();
        }
    }

    function updateScores(answer, question) {
        // Update various scores based on answers
        if (question.category === "symptoms") {
            if (question.id === 6 || question.id === 7) {
                // Urine leakage questions
                const severity = ["Never", "Rarely", "Sometimes", "Often", "Daily"].indexOf(answer);
                appState.scores.leakage += severity * 5;
            }
            if (question.id === 12 || question.id === 13) {
                // Pain questions
                const severity = ["None", "During/after sex", "When sitting", "Lower back pain", "Constant pain"].indexOf(answer);
                appState.scores.pain += severity * 5;
            }
        }
        
        if (question.category === "sexual") {
            // Sexual function questions
            const negativeAnswers = ["Very dissatisfied", "Poor", "Never", "No erection", "Always", "Very low", "Very insecure"];
            if (negativeAnswers.includes(answer)) {
                appState.scores.sexual += 10;
            }
        }
        
        if (question.id === 18 || question.id === 19) {
            // Exercise questions - more exercise = better strength/endurance
            const exerciseLevel = ["None", "1-2 times/week", "3-4 times/week", "5+ times/week", "Athlete training"].indexOf(answer);
            appState.scores.strength += exerciseLevel * 2;
            appState.scores.endurance += exerciseLevel * 2;
        }
        
        if (question.id === 34 || question.id === 35) {
            // Experience questions
            const experienceLevel = ["None", "Tried few times", "Occasional practice", "Regular practice", "Expert"].indexOf(answer);
            appState.scores.control += experienceLevel * 3;
        }
    }

    function generatePersonalizedProgram() {
        document.getElementById('quiz-section').classList.add('hidden');
        document.getElementById('analysis-section').classList.remove('hidden');
        
        // Update background
        updateBackground('analysis');
        
        // Analyze user profile and select appropriate exercises
        analyzeUserProfile();
        
        // Calculate scores
        const focusScore = Math.min(100, Math.max(30, Math.round(appState.scores.leakage)));
        const urgencyScore = Math.min(100, Math.max(30, Math.round(appState.scores.pain + appState.scores.sexual) / 2));
        const programScore = Math.min(100, Math.max(30, Math.round(
            (appState.scores.strength + appState.scores.endurance + appState.scores.control) / 3
        )));
        
        // Animate scores
        animateScore('focus-score', focusScore);
        animateScore('urgency-score', urgencyScore);
        animateScore('program-score', programScore);
        
        // Generate analysis and solution points
        generateAnalysis();
    }

    function analyzeUserProfile() {
        // Determine primary issues
        const issues = [];
        
        if (appState.scores.leakage > 50) issues.push("urinary leakage");
        if (appState.scores.pain > 50) issues.push("pelvic pain");
        if (appState.scores.sexual > 50) issues.push("sexual dysfunction");
        
        // Select appropriate exercise categories
        let primaryCategory = "foundational";
        
        if (appState.scores.leakage > 70) {
            primaryCategory = "rehab";
        } else if (appState.scores.sexual > 60) {
            primaryCategory = appState.gender === "Male" ? "sexual" : "sexual";
        } else if (appState.scores.pain > 60) {
            primaryCategory = "relaxation";
        } else if (appState.userProfile.q34 && appState.userProfile.q34.includes("Expert")) {
            primaryCategory = "hybrid";
        } else if (appState.userProfile.q18 && appState.userProfile.q18.includes("Athlete")) {
            primaryCategory = "endurance";
        }
        
        // Generate exercises for all 30 days
        generate30DayProgram(primaryCategory, issues);
    }

    function generate30DayProgram(primaryCategory, issues) {
        appState.dayExercises = {};
        appState.dayProgress = {};
        
        // For each day, select appropriate exercises
        for (let day = 1; day <= 30; day++) {
            appState.dayExercises[day] = generateDayExercises(day, primaryCategory, issues);
            appState.dayProgress[day] = []; // Empty array for completed exercises per day
        }
        
        // Set current day exercises
        appState.selectedExercises = appState.dayExercises[1];
    }

    function generateDayExercises(day, primaryCategory, issues) {
        let dayExercises = [];
        
        // Day-specific progression
        if (day <= 7) {
            // Week 1: Foundational exercises
            dayExercises.push(...exerciseLibrary.foundational.slice(0, 3));
            dayExercises.push(...exerciseLibrary.control.slice(0, 2));
            dayExercises.push(...exerciseLibrary.breathing.slice(0, 1));
        } else if (day <= 14) {
            // Week 2: Add primary category exercises
            dayExercises.push(...exerciseLibrary.foundational.slice(2, 4));
            const primaryExercises = exerciseLibrary[primaryCategory];
            if (primaryExercises) {
                dayExercises.push(...primaryExercises.slice(0, 2));
            }
            dayExercises.push(...exerciseLibrary.control.slice(1, 2));
            dayExercises.push(...exerciseLibrary.functional.slice(0, 1));
        } else if (day <= 21) {
            // Week 3: Add specific issue exercises
            dayExercises.push(...exerciseLibrary[primaryCategory].slice(2, 4));
            
            if (issues.includes("urinary leakage")) {
                dayExercises.push(...exerciseLibrary.functional.filter(e => 
                    e.subcategory === "stress-response"
                ).slice(0, 1));
            }
            
            if (issues.includes("pelvic pain")) {
                dayExercises.push(...exerciseLibrary.relaxation.slice(0, 1));
            }
            
            if (issues.includes("sexual dysfunction")) {
                const genderSpecific = appState.gender === "Male" ? 
                    exerciseLibrary.sexual.filter(e => e.subcategory === "male") :
                    exerciseLibrary.sexual.filter(e => e.subcategory === "female");
                dayExercises.push(...genderSpecific.slice(0, 1));
            }
            
            dayExercises.push(...exerciseLibrary.mindfulness.slice(0, 1));
        } else {
            // Week 4: Advanced and hybrid exercises
            dayExercises.push(...exerciseLibrary[primaryCategory].slice(3, 5));
            dayExercises.push(...exerciseLibrary.hybrid.slice(0, 1));
            dayExercises.push(...exerciseLibrary.endurance.slice(0, 1));
            dayExercises.push(...exerciseLibrary.mindfulness.slice(1, 2));
        }
        
        // Ensure exactly 6 exercises per day
        dayExercises = shuffleArray(dayExercises).slice(0, 6);
        
        // Sort by difficulty
        dayExercises.sort((a, b) => {
            const difficultyOrder = { "beginner": 1, "intermediate": 2, "advanced": 3 };
            return difficultyOrder[a.difficulty] - difficultyOrder[b.difficulty];
        });
        
        return dayExercises;
    }

    function generateAnalysis() {
        const analysisText = document.getElementById('analysis-text');
        const solutionPoints = document.getElementById('solution-points');
        
        // Generate analysis based on scores
        let analysis = "Based on your comprehensive 50-point assessment, ";
        
        if (appState.scores.leakage > 70) {
            analysis += "you have significant urinary leakage issues that require immediate attention. ";
        } else if (appState.scores.leakage > 40) {
            analysis += "you experience moderate urinary leakage that can be improved. ";
        } else {
            analysis += "you have good urinary control but can benefit from preventive training. ";
        }
        
        if (appState.scores.pain > 60) {
            analysis += "Pelvic pain is a major concern that needs targeted relaxation techniques. ";
        } else if (appState.scores.pain > 30) {
            analysis += "Some pelvic discomfort indicates need for relaxation training. ";
        }
        
        if (appState.scores.sexual > 50) {
            analysis += "Sexual function improvements are a key focus area. ";
        }
        
        analysis += `Your personalized 30-day program includes ${appState.dayExercises[1].length} carefully selected exercises each day.`;
        
        analysisText.textContent = analysis;
        
        // Generate solution points
        solutionPoints.innerHTML = '';
        
        const solutions = [
            "🎯 <span class='text-gold-light font-bold'>Targeted Approach:</span> Exercises specifically chosen for your symptoms",
            "📊 <span class='text-gold-light font-bold'>Progressive Plan:</span> Gradually increases difficulty over 30 days",
            "🔄 <span class='text-gold-light font-bold'>Sequential Learning:</span> Each exercise builds on previous ones",
            "⏱️ <span class='text-gold-light font-bold'>Time-Efficient:</span> 10-15 minutes daily commitment",
            "📈 <span class='text-gold-light font-bold'>Measurable Results:</span> Track progress with completion system",
            "🎬 <span class='text-gold-light font-bold'>Video Guidance:</span> Professional demonstrations for each exercise"
        ];
        
        solutions.forEach((solution, index) => {
            const point = document.createElement('div');
            point.className = "text-xs text-gray-300 flex items-start fade-in";
            point.style.animationDelay = `${index * 0.1}s`;
            point.innerHTML = `<i class="fas fa-check text-green-500 mr-2 mt-0.5"></i> ${solution}`;
            solutionPoints.appendChild(point);
        });
    }

    function showExercisePlan() {
        document.getElementById('analysis-section').classList.add('hidden');
        document.getElementById('exercise-section').classList.remove('hidden');
        
        // Update background
        updateBackground('exercise');
        
        renderExercisePlan();
    }

    function renderExercisePlan() {
        const exerciseList = document.getElementById('exercise-list');
        exerciseList.innerHTML = '';
        
        // Update day display
        document.getElementById('current-day').textContent = appState.currentDay;
        
        // Get exercises for current day
        const currentDayExercises = appState.dayExercises[appState.currentDay];
        const completedExercises = appState.dayProgress[appState.currentDay] || [];
        
        // Update stats
        const completedCount = completedExercises.length;
        const totalExercises = currentDayExercises.length;
        document.getElementById('completion-stats').textContent = `${completedCount}/${totalExercises} completed`;
        
        currentDayExercises.forEach((exercise, index) => {
            const isCompleted = completedExercises.includes(exercise.id);
            const isCurrent = index === completedExercises.length;
            const isLocked = index > completedExercises.length;
            
            const card = document.createElement('div');
            card.className = `exercise-card p-3.5 rounded-lg ${isLocked ? 'locked' : ''} ${isCurrent ? 'current' : ''} ${isCompleted ? 'completed' : ''} fade-in`;
            card.style.animationDelay = `${index * 0.08}s`;
            
            card.innerHTML = `
                <div class="flex items-center gap-3.5">
                    <div class="number-indicator ${isCurrent ? 'number-current' : isCompleted ? 'number-completed' : 'number-locked'}">
                        ${index + 1}
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center gap-2 mb-1.5">
                            <span class="category-tag">${exercise.category}</span>
                            <span class="text-xs text-gray-400 font-bold">${exercise.difficulty}</span>
                        </div>
                        <h3 class="text-sm font-bold text-white mb-1.5 truncate text-3d-white">${exercise.name}</h3>
                        <p class="text-xs text-gray-300 line-clamp-1 text-3d-secondary">${exercise.benefit}</p>
                        <div class="flex items-center gap-3.5 mt-2 text-xs text-gray-400">
                            <span class="flex items-center"><i class="fas fa-clock mr-1.5"></i> ${exercise.duration}</span>
                            <span class="flex items-center"><i class="fas fa-redo mr-1.5"></i> ${exercise.reps}</span>
                        </div>
                    </div>
                    <div class="shrink-0">
                        ${isLocked ? 
                            '<i class="fas fa-lock text-base text-gray-600"></i>' : 
                         isCompleted ? 
                            '<i class="fas fa-check-circle text-lg text-green-500" style="filter: drop-shadow(0 2px 0 rgba(0,0,0,0.3))"></i>' : 
                            '<i class="fas fa-play-circle text-lg text-gold-primary" style="filter: drop-shadow(0 2px 0 rgba(212,175,55,0.3))"></i>'}
                    </div>
                </div>
            `;
            
            if (!isLocked) {
                card.onclick = () => openExerciseVideo(exercise, index);
            }
            
            exerciseList.appendChild(card);
        });
        
        // Scroll to current exercise
        setTimeout(() => {
            const currentCard = document.querySelector('.exercise-card.current');
            if (currentCard) {
                currentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }, 300);
    }

    function openExerciseVideo(exercise, index) {
        appState.currentVideoIndex = index;
        
        // Create custom video player with 3D effect
        const videoFrame = document.getElementById('video-frame');
        videoFrame.innerHTML = `
            <div style="width:100%;height:100%;background:#000;position:relative;border-radius:14px;overflow:hidden;box-shadow: inset 0 0 30px rgba(0,0,0,0.8);">
                <div style="position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,#000,#111);display:flex;align-items:center;justify-content:center;">
                    <div style="text-align:center;padding:20px;">
                        <div style="width:80px;height:80px;background:${getCategoryColor(exercise.category)};border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 20px;box-shadow:0 0 30px ${getCategoryColor(exercise.category)}80, inset 0 4px 0 rgba(255,255,255,0.2);">
                            <i class="fas fa-dumbbell" style="color:#000;font-size:32px;"></i>
                        </div>
                        <div style="color:#D4AF37;font-weight:bold;font-size:18px;margin-bottom:10px;letter-spacing:0.5px;text-shadow:0 2px 0 rgba(0,0,0,0.5);">PELVIC TRAINING SYSTEM</div>
                        <div style="color:#fff;font-size:14px;margin-bottom:8px;text-shadow:0 1px 0 rgba(0,0,0,0.5);">Professional Exercise Demonstration</div>
                        <div style="color:#888;font-size:12px;text-shadow:0 1px 0 rgba(0,0,0,0.5);">Loading training video...</div>
                    </div>
                </div>
                <iframe 
                    src="https://www.youtube.com/embed/${exercise.videoCode}?autoplay=1&controls=0&modestbranding=1&rel=0&showinfo=0&iv_load_policy=3"
                    style="width:100%;height:100%;border:none;opacity:0;position:absolute;top:0;left:0;"
                    allow="autoplay; encrypted-media"
                    allowfullscreen
                    id="hidden-iframe"
                ></iframe>
            </div>
        `;
        
        // Update modal info
        document.getElementById('video-title').textContent = exercise.name;
        document.getElementById('video-description').textContent = exercise.description;
        document.getElementById('video-duration').textContent = exercise.duration;
        document.getElementById('video-reps').textContent = exercise.reps;
        document.getElementById('video-category').textContent = exercise.category;
        document.getElementById('solution-text').textContent = exercise.solution;
        
        // Show modal
        document.getElementById('video-modal').classList.remove('hidden');
        document.body.style.overflow = 'hidden';
        
        // Auto-play after a delay
        setTimeout(() => {
            const iframe = document.getElementById('hidden-iframe');
            if (iframe) {
                iframe.style.opacity = '1';
            }
        }, 1000);
    }

    function repeatCurrentVideo() {
        const currentExercise = appState.dayExercises[appState.currentDay][appState.currentVideoIndex];
        openExerciseVideo(currentExercise, appState.currentVideoIndex);
    }

    function nextVideo() {
        // Mark current exercise as completed for current day
        const currentExercise = appState.dayExercises[appState.currentDay][appState.currentVideoIndex];
        if (!appState.dayProgress[appState.currentDay]) {
            appState.dayProgress[appState.currentDay] = [];
        }
        
        if (!appState.dayProgress[appState.currentDay].includes(currentExercise.id)) {
            appState.dayProgress[appState.currentDay].push(currentExercise.id);
        }
        
        closeVideoModal();
        
        // Check if all exercises completed for current day
        const completedExercises = appState.dayProgress[appState.currentDay] || [];
        const totalExercises = appState.dayExercises[appState.currentDay].length;
        
        if (completedExercises.length === totalExercises) {
            // Day completed, move to next day
            if (appState.currentDay < 30) {
                appState.currentDay++;
                setTimeout(() => {
                    alert(`✅ Excellent! Day ${appState.currentDay-1} completed. Starting Day ${appState.currentDay}`);
                    renderExercisePlan();
                }, 300);
            } else {
                setTimeout(() => {
                    alert(`🏆 Congratulations! You've completed the entire 30-day program!`);
                }, 300);
            }
        } else {
            renderExercisePlan();
        }
    }

    function closeVideoModal() {
        document.getElementById('video-modal').classList.add('hidden');
        document.getElementById('video-frame').innerHTML = '';
        document.body.style.overflow = 'auto';
    }

    function restartAssessment() {
        appState = {
            currentQuestion: 0,
            gender: null,
            age: null,
            primaryGoal: null,
            condition: null,
            experience: null,
            symptoms: [],
            scores: { leakage: 0, pain: 0, sexual: 0, strength: 0, endurance: 0, control: 0 },
            currentDay: 1,
            completedExercises: [],
            totalQuestions: 50,
            selectedCategory: null,
            selectedExercises: [],
            currentVideoIndex: 0,
            userProfile: {},
            dayProgress: {},
            dayExercises: {}
        };
        
        showQuestion();
    }

    // ==================== HELPER FUNCTIONS ====================

    function animateScore(elementId, targetValue) {
        const element = document.getElementById(elementId);
        let current = 0;
        const increment = targetValue / 40;
        const interval = setInterval(() => {
            current += increment;
            if (current >= targetValue) {
                current = targetValue;
                clearInterval(interval);
            }
            element.textContent = Math.round(current) + "%";
        }, 20);
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function getCategoryColor(category) {
        const colors = {
            "foundational": "#FFD700",
            "strength": "#FF6B6B",
            "control": "#4ECDC4",
            "functional": "#FF9F43",
            "breathing": "#54A0FF",
            "sexual": "#FF9FF3",
            "rehab": "#00D2D3",
            "endurance": "#5F27CD",
            "mindfulness": "#1DD1A1",
            "hybrid": "#F368E0",
            "relaxation": "#8395A7"
        };
        return colors[category] || "#D4AF37";
    }

    function updateBackground(section) {
        // Hide all backgrounds first
        document.getElementById('quiz-bg').classList.add('hidden');
        document.getElementById('analysis-bg').classList.add('hidden');
        document.getElementById('exercise-bg').classList.add('hidden');
        
        // Show appropriate background
        if (section === 'quiz') {
            document.getElementById('quiz-bg').classList.remove('hidden');
        } else if (section === 'analysis') {
            document.getElementById('analysis-bg').classList.remove('hidden');
        } else if (section === 'exercise') {
            document.getElementById('exercise-bg').classList.remove('hidden');
        }
    }

    function setupEventListeners() {
        // Escape key closes modal
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                if (!document.getElementById('video-modal').classList.contains('hidden')) {
                    closeVideoModal();
                }
                if (!document.getElementById('question-popup-modal').classList.contains('hidden')) {
                    closeQuestionPopup();
                }
            }
        });
        
        // Touch feedback
        document.querySelectorAll('button').forEach(btn => {
            btn.addEventListener('touchstart', () => {
                btn.style.transform = 'translateY(1px)';
            });
            btn.addEventListener('touchend', () => {
                btn.style.transform = '';
            });
        });
        
        // Handle back button for WebView
        window.addEventListener('popstate', function(event) {
            if (!document.getElementById('video-modal').classList.contains('hidden')) {
                closeVideoModal();
                history.pushState(null, null, window.location.href);
            }
            if (!document.getElementById('question-popup-modal').classList.contains('hidden')) {
                closeQuestionPopup();
                history.pushState(null, null, window.location.href);
            }
        });
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', initApp);

    // ==================== HEADER/SIDEBAR/FUNCTIONS from main.html ====================
    const menuBtn = document.getElementById('menuBtn');
    const sidebar = document.getElementById('sidebar');
    const closeSidebarBtn = document.getElementById('closeSidebar');

    if (menuBtn && sidebar && closeSidebarBtn) {
        menuBtn.onclick = () => sidebar.classList.add('open');
        closeSidebarBtn.onclick = () => sidebar.classList.remove('open');
    }

    function toggleAccordion(id) {
        const content = document.getElementById(id);
        const icon = document.getElementById('icon-' + id);
        if (content.style.maxHeight) {
            content.style.maxHeight = null;
            icon.style.transform = 'rotate(0deg)';
        } else {
            content.style.maxHeight = content.scrollHeight + "px";
            icon.style.transform = 'rotate(180deg)'; 
        }
    }

    function handleNavClick(element, popupKey = null) {
        document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('active');
        });
        element.classList.add('active');
        
        if (popupKey) {
            openPopup(popupKey);
        }
    }

    const lists = {
        bridal: { title: "Bridal Suite", bg: "blessingsssl.png", items: [{ name: "Traditional Royal", link: "bridal_traditional.html" }, { name: "Arabic Premium", link: "bridal_arabic.html" }, { name: "Indo-Western", link: "bridal_indowestern.html" }] },
        festive: { title: "Festive Art", bg: "blessingsssl.png", items: [ { name: "Indo Arebic", link: "festive_indoarabic.html" },{ name: "Moroccan Trends", link: "festive_geometric.html" },{ name: "Arabic Festive", link: "festive_arabic.html" }, { name: "Indian Classic", link: "festive_indian.html" }, { name: "Minimal Style", link: "festive_minimal.html" }] },
        gallery: { 
            title: "Gallery", 
            bg: "blessingsssl.png", 
            items: [
                { name: "Royal Traditional", link: "bridal_traditional.html" }, 
                { name: "Modern Arabic", link: "bridal_arabic.html" },
                { name: "Fusion Luxe", link: "bridal_indowestern.html" },
                { name: "Festive Arabic Art", link: "festive_arabic.html" },
                { name: "Indian Festive Best", link: "festive_indian.html" },
                { name: "Indo-Arabic Fusion", link: "festive_indoarabic.html" },
                { name: "Moroccan Trends", link: "festive_geometric.html" },
                { name: "Minimalist Elegance", link: "festive_minimal.html" }
            ] 
        }
    };

    function openPopup(key) {
        const data = lists[key];
        if (!data) return;
        
        // You might want to create a modal for these or redirect to appropriate pages
        // For now, I'll just alert the first item
        if (data.items && data.items.length > 0) {
            // Redirect to first item or handle as needed
            // window.location.href = data.items[0].link;
        }
    }

    function closePopup() {
        // Implement if you add a modal
    }
</script>
</body>
</html>
